# 单例模式的定义

确保某个类只有一个实例，而且自行实例化并向整个系统提供这个实例

## 实现单例模式的关键点：
1. 构造函数不对外开放，一般为 Private; --> 客户端代码不能通过 new 的形式手动构造单例类的对象
2. 确保一个静态方法或者枚举返回单例对象；
3. 确保单例类的对象有且只有一个，尤其是在多线程的环境下；
4. 确保单例对象在反序列化时不会重新构建对象。


## 实现单例模式容易遇到的问题
面对多线程（multi-threading）、类装载器（class loaders）和序列化（serialization）时可能会有一些缺陷

# 单例模式的几种写法：
1. 饿汉式
2. 懒汉式
3. Double CheckLocal
4. 静态内部类
5. 枚举
6. 使用容器实现单例模式
## 1. 饿汉式

实现方式：在声明静态对象时就已经初始化

- 优点：   线程安全，调用效率高，但是不能延时加载
- 缺点：   如果程序从头到位都没用使用这个单例的话，单例的对象还是会创建

## 2. 懒汉式

实现方式：声明一个静态对象，并在用户第一次调用 getInstance 时进行初始化

原理分析：getInstance 方法中添加了 synchronized 关键字，这是在多线程环境下保证单例对象唯一性的手段。

缺点：
- 第一次加载的时候需要实例化，反应稍慢；
- 每次调用 getInstance 都会进行同步，造成不必要的同步开销，不建议用。


## 3. DCL -- Double CheckLocal

原理分析：
- 第一次判空主要是为了不必要的同步
- 第二次判空是为了在 null 的情况下创建实例

优点： 资源利用率高，绝大多数场景下可以保证单例对象的唯一性

缺点： 
1. 在并发场景比较复杂或者 JDK 版本 < 1.6 时会有一些问题 
2. 虽然在一定程度上解决了资源消耗、多余的同步、线程安全等问题，但是它还是会在某些特殊的情况下失效的问题，这个问题被称为双重检查锁定失效。


## 4. 静态内部类

推荐使用的单例写法

优点： 保证线程安全，保证对象唯一性，延迟了单例对象的实例化


