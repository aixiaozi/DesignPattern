# 1. Builder 模式 介绍

>建造者模式又被称呼为生成器模式，这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。
使用多个简单的对象一步一步构建成一个复杂的对象，有点像造房子一样一步步从地基做起到万丈高楼。我想这也是为什么被称呼为建造者模式的原因吧！

定义
- 将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的构建表示。  

主要作用
- 在用户不知道对象的建造过程和细节的情况下就可以直接创建复杂的对象。

如何使用
- 用户只需要给出指定复杂对象的类型和内容，建造者模式负责按顺序创建复杂对象（把内部的建造过程和细节隐藏起来）。

解决的问题：
- 方便用户创建复杂的对象（不需要知道实现过程）
- 代码复用性 & 封装性（将对象构建过程和细节进行封装 & 复用）。

注意事项
- 与工厂模式的区别是：建造者模式更加关注与零件装配的顺序，一般用来创建更为复杂的对象.

## UML 
![image](https://github.com/aixiaozi/DesignPattern/raw/master/image/builder.PNG)


 - Product            ---- 产品类：抽象的产品类
 - Builder            ---- 抽象 Builder 类，规范产品的组建，一般是由子类实现具体的组装过程
 - ConcreteBuilder    ---- 具体的 Builder 类
 - Director           ---- 统一组装过程

# 2. 实现方式

写到这脑子有点乱，等之后对 Builder 模式有了更深的了解再更新，=-=

我所了解的主要有两种实现方式：

1. 通过Client、Director、Builder和Product形成的建造者模式

2. 通过静态内部类方式实现零件无序装配话构造

## 2.1 第一种实现方式

通过Client、Director、Builder和Product形成的建造者模式

### 2.1.1 组成部分
- **抽象建造者（builder）**：描述具体建造者的公共接口，一般用来定义建造细节的方法，并不涉及具体的对象部件的创建。
- **具体建造者（ConcreteBuilder**）：描述具体建造者，并实现抽象建造者公共接口。
- **指挥者（Director）**：调用具体建造者来创建复杂对象（产品）的各个部分，并按照一定顺序（流程）来建造复杂对象。
- **产品（Product）**：描述一个由一系列部件组成较为复杂的对象。

### 2.1.2 举个栗子
来造房吧，假设造房简化为如下步骤： 1. 地基 --> 2. 钢筋工程 --> 3. 铺电线 --> 4. 粉刷

“如果”要盖一座房子，首先要找一个建筑公司或工程承包商（指挥者）。承包商指挥工人（具体建造者）过来造房子（产品），最后验收。

### 2.1.3 具体步骤
1. 创建抽象建造者定义造房步骤
2. 创建工人具体实现造房步骤
3. 创建承包商指挥工人施工
4. 验收，检查是否建造完成

### 2.1.4 具体代码

[代码](https://blog.csdn.net/cs_lwb/article/details/84261641#%EF%BC%884%EF%BC%89%E5%85%B7%E4%BD%93%E4%BB%A3%E7%A0%81)

## 2.2 第二种实现方式

[通过静态内部类方式实现零件无序装配话构造](https://blog.csdn.net/cs_lwb/article/details/84261641#%E4%B8%89%E3%80%81%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E5%BC%8F)

# 3. 对 Builder 模式认识更清晰些

## 问题场景
若是将 ImageLoader 的配置都放在 ImageLoader 类中，会导致该类中有过多的函数暴露，让用户在每次调用函数时都要仔细选择，针对这个问题，我们可以对这个程序做一些限制，比如让用户只能在初始化的时候配置这些参数。

## 问题分析
核心思路
 - 将一个复杂对象的构建与它的表示分离
 
解决方法
 - 用 Builder 模式来构建一个不可变的配置对象，并且将这个配置对象注入到 ImageLoader 中

## Android 中的一些使用场景
1. ImageLoader 中的初始化配置参数
2. AlertDialog.Builder

## 构建和表示分离

举个栗子：

通过将 `ImageLoaderConfig` 的构造函数、字段私有化，使得外部不能访问内部属性，用户唯一能够设置属性的地方就是通过 `Builder` 对象了，也就是说用户只能通过 `Builder` 对象构造 `ImageLoaderConfig`, 从而达到构建和表示分离的目的。

# 4. 总结

Builder 模式在 Android 中通常作为配置类的构建器将配置的构建和表示分离，同时也是将配置从目标类中隔离出来，避免过多的 setter 方法。

Builder 模式比较常见的实现形式是通过链式调用实现，这样使得代码更简洁、易懂。

## 优点
1. 良好的封装性，使用建造者模式可以使客户端不必知道产品内部组成的细节。
2. 建造者独立，容易扩展。

## 缺点
会产生多余的 Builder 对象以及 Director 对象，消耗内存。
